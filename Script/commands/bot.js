const moment = require("moment-timezone");

module.exports.config = {
  name: "sefatboss",
  version: "1.0.0",
  hasPermssion: 0,
  credits: "Custom AI Bot",
  description: "ржмрж╛ржВрж▓рж╛ ржмржЯ тАУ Sefat ржмрж╕, ржХрзМрждрзБржХ, ржХрзЛрж░ржЖржи-рж╣рж╛ржжрж┐рж╕ ржУ рж╢рзБржнрзЗржЪрзНржЫрж╛",
  commandCategory: "AI",
  usages: "auto reply",
  cooldowns: 3
};

// Sefat ржмрж╕рзЗрж░ ржЬржирзНржп ржнрж┐ржирзНржи ржнрж┐ржирзНржи ржкрзНрж░рж╢ржВрж╕рж╛
const sefats = [
  "ЁЯМЯ ржХрж┐ржВ **Sefat ржмрж╕** ЁЯТО тАУ ржЙржирж┐ ржирж╛ ржерж╛ржХрж▓рзЗ ржПржЗ ржЧрзНрж░рзБржк ржирзАрж░рж╕ рж╣рзЯрзЗ ржпрзЗржд!",
  "ЁЯШО **Sefat ржПржбржорж┐ржи** ЁЯПЖ тАУ рж╕ржмрж╛рж░ рж╣рж┐рж░рзЛ, рж╕ржмрж╛рж░ ржкрзНрж░рж┐рзЯ!",
  "ЁЯФе **Sefat ржмрж╕** тАУ рж╕ржмрж╕ржорзЯ рж╕рж╛рж╣рж╛ржпрзНржпржХрж╛рж░рзА ржУ ржоржЬрж╛рж░ ржорж╛ржирзБрж╖! ЁЯШВ",
  "ЁЯТЦ **Sefat ржПржбржорж┐ржи** тАУ рж╣рж╛рж╕рж┐ ржЖрж░ ржЖржиржирзНржжрзЗрж░ ржкрзНрж░рждрзАржХ! ЁЯМИ",
  "тЬи **Sefat ржмрж╕** тАУ ржЧрзНрж░рзБржкрзЗрж░ ржкрзНрж░рж╛ржгржнрзЛржорж░рж╛! ЁЯТХ"
];

// ржмрзНржпржмрж╣рж╛рж░ржХрж╛рж░рзАрж░ ржирж╛ржорж╕рж╣ рж▓рж╛ржЗржи
const replies = [
  name => `ЁЯШД рж╣рзНржпрж╛рж▓рзЛ ${name}! ржХрзЗржоржи ржЖржЫрзЗржи ржЖржЬ? ЁЯМ╕`,
  name => `ЁЯШВ ${name}, рж╣рж╛рж╕рж┐ржЗ ржЬрзАржмржиржХрзЗ рж╕рзБржирзНржжрж░ ржХрж░рзЗ тАУ рж╣рж╛рж╕рзБржи! ЁЯШШ`,
  name => `ЁЯдЧ ${name}, ржЖржкржирж┐ рж╕ржмрж╛рж░ ржЕржирзБржкрзНрж░рзЗрж░ржгрж╛ тАУ ржЪрж╛рж▓рж┐рзЯрзЗ ржпрж╛ржи! ЁЯТл`,
  name => `ЁЯТМ ${name}, ржнрж╛рж▓рзЛржмрж╛рж╕рж╛ ржЫрзЬрж┐рзЯрзЗ ржжрж┐ржи, рж╕рзБржЦрзА ржерж╛ржХрзБржи! ЁЯМ║`,
  name => `ЁЯЩМ ${name}, рж╕рж╛ржлрж▓рзНржп ржЖржкржирж╛рж░ рж╕рж╛ржерзЗржЗ ржЖржЫрзЗ! ЁЯМЯ`
];

// ржХрзМрждрзБржХ (ржмрж╛ржВрж▓рж╛рзЯ)
const jokes = [
  "ЁЯШВ рж╢рж┐ржХрзНрж╖ржХ: ржкрж░рзАржХрзНрж╖рж╛рзЯ рж╢рзВржирзНржп ржкрзЗрж▓рж┐ ржХрзЗржи? ржЫрж╛рждрзНрж░: ржкрзНрж░рж╢рзНржиржкрждрзНрж░рзЗ рж▓рзЗржЦрж╛ ржЫрж┐рж▓ 'ржЙрждрзНрждрж░ рж▓рж┐ржЦрзБржи' тАФ ржЖржорж┐ рж▓рж┐ржЦрж┐ржирж┐!",
  "ЁЯдг ржбрж╛ржХрзНрждрж╛рж░: рж╕ржорж╕рзНржпрж╛ ржХрзА? рж░рзЛржЧрзА: рж╕ржорж╕рзНржпрж╛ ржирзЗржЗ, ржХрж┐ржирзНрждрзБ ржмржЙ ржЖржЫрзЗ, рж╕рзЗржЯрж╛ржЗ рж╕ржорж╕рзНржпрж╛!",
  "ЁЯШД ржмржирзНржзрзБ рзз: рждрзБржЗ ржПржд ржЦрзБрж╢рж┐ ржХрзЗржи? ржмржирзНржзрзБ рзи: ржмржЙ рж╢ржкрж┐ржВ ржХрж░рждрзЗ ржЧрж┐рзЯрзЗржЫрж┐рж▓, ржжрзЛржХрж╛ржи ржмржирзНржз ржЫрж┐рж▓!"
];

// ржЗрж╕рж▓рж╛ржорж┐ржХ рж╕рзНржорж░ржгрж┐ржХрж╛ (ржХрзЛрж░ржЖржи-рж╣рж╛ржжрж┐рж╕)
const islamicQuotes = [
  "ЁЯХМ рж░рж╛рж╕рзВрж▓ я╖║ ржмрж▓рзЗржЫрзЗржи: тАЬрж╕рзЗрж░рж╛ ржорж╛ржирзБрж╖ рж╕рзЗржЗ, ржпрзЗ ржЕржирзНржпржжрзЗрж░ ржЙржкржХрж╛рж░рзЗ ржЖрж╕рзЗредтАЭ (ржжрж╛рж░рж╛ржХрзБрждржирж┐)",
  "ЁЯУЦ ржЖрж▓-ржХрзЛрж░ржЖржи: тАЬржирж┐рж╢рзНржЪрзЯржЗ ржЖрж▓рзНрж▓рж╛рж╣ ржзрзИрж░рзНржпрж╢рзАрж▓ржжрзЗрж░ рж╕рж╛ржерзЗ ржЖржЫрзЗржиредтАЭ (рж╕рзВрж░рж╛ ржмрж╛ржХрж╛рж░рж╛ рзи:рззрзлрзй)",
  "ЁЯХЛ рж░рж╛рж╕рзВрж▓ я╖║ ржмрж▓рзЗржЫрзЗржи: тАЬржпрзЗржЦрж╛ржирзЗржЗ ржерж╛ржХрзЛ, ржЖрж▓рзНрж▓рж╛рж╣ржХрзЗ ржнрзЯ ржХрж░редтАЭ (рждрж┐рж░ржорж┐ржЬрж┐)"
];

// рж╕ржорзЯ ржЕржирзБржпрж╛рзЯрзА рж╢рзБржнрзЗржЪрзНржЫрж╛
function timeGreeting() {
  const hour = parseInt(moment().tz("Asia/Dhaka").format("HH"));
  if (hour < 12) return "тШАя╕П рж╢рзБржн рж╕ржХрж╛рж▓!";
  if (hour < 18) return "ЁЯМдя╕П рж╢рзБржн ржжрзБржкрзБрж░!";
  return "ЁЯМЩ рж╢рзБржн рж░рж╛рждрзНрж░рж┐!";
}

module.exports.handleEvent = async function({ api, event, Users }) {
  try {
    const { threadID, messageID, senderID } = event;
    const name = await Users.getNameUser(senderID) || "ржмржирзНржзрзБ";

    // рж░тАНрзНржпрж╛ржирзНржбржо ржХржирзНржЯрзЗржирзНржЯ ржирж┐рж░рзНржмрж╛ржЪржи
    const sef = sefats[Math.floor(Math.random() * sefats.length)];
    const line = replies[Math.floor(Math.random() * replies.length)](name);
    const joke = jokes[Math.floor(Math.random() * jokes.length)];
    const islam = islamicQuotes[Math.floor(Math.random() * islamicQuotes.length)];
    const greeting = timeGreeting();
    const time = moment().tz("Asia/Dhaka").format("hh:mm A");

    const message = `
${greeting}

${sef}
${line}

ржХрзМрждрзБржХ: ${joke}
ржЗрж╕рж▓рж╛ржорж┐ржХ рж╕рзНржорж░ржгрж┐ржХрж╛: ${islam}

тП░ рж╕ржорзЯ: ${time}
`;

    api.sendMessage(message, threadID, messageID);
  } catch (err) {
    console.error(err);
  }
};
